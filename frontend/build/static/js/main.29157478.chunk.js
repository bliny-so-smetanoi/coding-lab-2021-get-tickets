(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{38:function(e,t,c){},54:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(27),r=c.n(a),i=(c(38),c(5)),l=c(7),j=c(3);function o(){}var d=Object(n.createContext)({token:null,userID:null,login:o,logout:o,isAuth:!1}),b=c(0);var u=function(){var e=Object(l.g)(),t=Object(n.useContext)(d),c=t.isAuth,s=t.logout,a=Object(n.useState)(!1),r=Object(j.a)(a,2),o=r[0],u=r[1];function h(){s(),e.push("/")}return c?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("nav",{className:"navClass",children:[Object(b.jsx)(i.c,{to:"/about",className:"navItemEdge",children:"About"}),Object(b.jsx)(i.c,{to:"/contacts",className:"navItem",children:"Contacts"}),Object(b.jsx)("div",{className:"navButtonsContainer",children:Object(b.jsx)(i.c,{className:"navMainButton",to:"/",children:"Get Tickets\u2122"})}),Object(b.jsxs)("div",{className:"navButtonsContainerRight",children:[Object(b.jsx)("button",{onClick:function(){return e.push("/info")},className:"navButtons",children:"My account"}),Object(b.jsx)("button",{onClick:h,className:"navButtons",children:"Logout"})]})]}),Object(b.jsx)("div",{className:"mobile-button",onClick:function(){return u(!o)},children:Object(b.jsxs)("svg",{height:"20pt",viewBox:"0 -53 384 384",width:"384pt",xmlns:"http://www.w3.org/2000/svg",children:[Object(b.jsx)("path",{d:"m368 154.667969h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"}),Object(b.jsx)("path",{d:"m368 32h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"}),Object(b.jsx)("path",{d:"m368 277.332031h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"})]})}),Object(b.jsx)("div",{className:"mobile-nav",style:{display:o?"block":"none"},children:Object(b.jsxs)("div",{className:"mobile-nav-body",children:[Object(b.jsx)(i.c,{to:"/",className:"mobile-nav-elem",children:"Buy tickets"}),Object(b.jsx)(i.c,{to:"/about",className:"mobile-nav-elem",children:"About"}),Object(b.jsx)(i.c,{to:"/contacts",className:"mobile-nav-elem",children:"Contacts"}),Object(b.jsxs)("div",{className:"mobile-nav-button",children:[Object(b.jsx)("button",{onClick:function(){return e.push("/info")},className:"navButtons",children:"My account"}),Object(b.jsx)("button",{onClick:h,className:"navButtons",children:"Logout"})]})]})})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("nav",{className:"navClass",children:[Object(b.jsx)(i.c,{to:"/about",className:"navItemEdge",children:"About"}),Object(b.jsx)(i.c,{to:"/contacts",className:"navItem",children:"Contacts"}),Object(b.jsx)("div",{className:"navButtonsContainer",children:Object(b.jsx)(i.c,{className:"navMainButton",to:"/",children:"Get Tickets\u2122"})}),Object(b.jsx)("div",{className:"navButtonsContainerRight",children:Object(b.jsx)("button",{onClick:function(){return e.push("/login")},className:"navButtons",children:"Sign in"})})]}),Object(b.jsx)("div",{className:"mobile-button",onClick:function(){return u(!o)},children:Object(b.jsxs)("svg",{height:"20pt",viewBox:"0 -53 384 384",width:"384pt",xmlns:"http://www.w3.org/2000/svg",children:[Object(b.jsx)("path",{d:"m368 154.667969h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"}),Object(b.jsx)("path",{d:"m368 32h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"}),Object(b.jsx)("path",{d:"m368 277.332031h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"})]})}),Object(b.jsx)("div",{className:"mobile-nav",style:{display:o?"block":"none"},children:Object(b.jsxs)("div",{className:"mobile-nav-body",children:[Object(b.jsx)(i.c,{to:"/",className:"mobile-nav-elem",children:"Buy tickets"}),Object(b.jsx)(i.c,{to:"/about",className:"mobile-nav-elem",children:"About"}),Object(b.jsx)(i.c,{to:"/contacts",className:"mobile-nav-elem",children:"Contacts"}),Object(b.jsx)("div",{className:"mobile-nav-button-is",children:Object(b.jsx)("button",{onClick:function(){return e.push("/login")},className:"navButtons",children:"Log in"})})]})})]})},h=c(10);var O=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h.a,{children:Object(b.jsx)("title",{children:"About"})}),Object(b.jsx)(u,{}),Object(b.jsx)("div",{className:"userinfopage-container",children:Object(b.jsxs)("div",{className:"userinfopage-body",children:[Object(b.jsx)("h1",{style:{color:"#00838F"},align:"center",children:"Get Tickets"}),Object(b.jsx)("p",{align:"center",children:"This web-service was developed by SE-2003 students."}),Object(b.jsx)("p",{style:{height:"50vh",textAlign:"center"},children:"The aim of this project is presentation of MERN perception in web development."})]})})]})},x=c(4),p=c.n(x),m=c(13),v=c(6),g=c(9),f=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(null),r=Object(j.a)(a,2),i=r[0],l=r[1];return{loading:c,request:Object(n.useCallback)(function(){var e=Object(g.a)(p.a.mark((function e(t){var c,n,a,r,i,j=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=j.length>1&&void 0!==j[1]?j[1]:"GET",n=j.length>2&&void 0!==j[2]?j[2]:null,a=j.length>3&&void 0!==j[3]?j[3]:{},s(!0),e.prev=4,n&&(n=JSON.stringify(n),a["Content-Type"]="application/json"),e.next=8,fetch(t,{method:c,body:n,headers:a});case 8:return r=e.sent,e.next=11,r.json();case 11:if(i=e.sent,r.ok){e.next=14;break}throw new Error(i.message||"Something went wrong...");case 14:return s(!1),e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(4),s(!1),l(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(n.useCallback)((function(){return l(null)}),[])}};var y=function(){var e=Object(n.useState)({name:"",text:""}),t=Object(j.a)(e,2),c=t[0],s=t[1],a=f().request;function r(){return(r=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==c.name&&""!==c.text){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,a("api/userdata/feedback","POST",c);case 5:t=e.sent,alert(t.message),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function i(e){s(Object(v.a)(Object(v.a)({},c),{},Object(m.a)({},e.target.name,e.target.value)))}return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"contactform-container",children:[Object(b.jsxs)("div",{className:"contactform-head",children:[Object(b.jsx)("div",{children:Object(b.jsx)("input",{placeholder:"Your first name",name:"name",onChange:i,className:"contactform-input"})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:function(){return r.apply(this,arguments)},className:"contactform-send-button",children:"Send"})})]}),Object(b.jsx)("div",{children:Object(b.jsx)("textarea",{name:"text",onChange:i,placeholder:"Your feedback or suggestions. . .",className:"contactform-text"})})]})})};var N=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h.a,{children:Object(b.jsx)("title",{children:"Contact"})}),Object(b.jsx)(u,{}),Object(b.jsx)("div",{className:"userinfopage-container",children:Object(b.jsxs)("div",{className:"userinfopage-body",children:[Object(b.jsxs)("article",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(b.jsx)("h1",{children:"Contacts"}),Object(b.jsxs)("p",{children:["Akezhan Issadilov: ",Object(b.jsx)("b",{style:{color:"#00838F"},children:"akezhan.issadilov@gmail.com"})]}),Object(b.jsxs)("p",{style:{height:"50vh"},children:["Alua Onayeva: ",Object(b.jsx)("b",{style:{color:"#00838F"},children:"onayeva_alua@mail.ru"})]})]}),Object(b.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(b.jsx)(y,{})})]})})]})};var k=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"lds-facebook",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})})},w=c(15),C=c.n(w);var S=function(e){var t=e.event;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h1",{align:"center",children:[" ",t.name]}),Object(b.jsxs)("div",{className:"eventpage-main-body",children:[Object(b.jsx)("div",{children:Object(b.jsx)("img",{className:"eventpage-image-card",height:"400",width:"400",src:t.image})}),Object(b.jsxs)("div",{className:"eventpage-event-card",children:[Object(b.jsx)("div",{children:Object(b.jsxs)("p",{children:["Artist: ",Object(b.jsx)("i",{children:t.artist})]})}),Object(b.jsx)("div",{children:Object(b.jsxs)("p",{children:["Place: ",Object(b.jsx)("i",{children:t.address})]})}),Object(b.jsx)("div",{children:Object(b.jsxs)("p",{children:["Date and time: ",Object(b.jsx)("i",{children:Object(b.jsx)(C.a,{format:"HH:mm MMM D, YYYY",children:t.date_time})})]})}),Object(b.jsx)("div",{className:"eventpage-info-desc",children:Object(b.jsxs)("p",{children:["Description: ",Object(b.jsx)("i",{children:t.description})]})})]})]})]})},F=c(31);var I=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"lds-ellipsis",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})})},M=c(21),D=c(32);c(52);var T=function(e){var t=Object(l.h)().id,c=f(),s=c.request,a=c.loading,r=e.event,o=r.event,u=r.eventSeats,h=Object(n.useContext)(d).userID,O=Object(n.useState)(!1),x=Object(j.a)(O,2),y=x[0],N=x[1],k=Object(n.useState)(!1),w=Object(j.a)(k,2),C=w[0],S=w[1],T=Object(n.useState)(0),B=Object(j.a)(T,2),z=B[0],E=B[1],_=Object(n.useState)(u),A=Object(j.a)(_,2),P=A[0],X=A[1],Y=Object(n.useState)([]),L=Object(j.a)(Y,2),q=L[0],H=L[1],R=Object(n.useState)({owner:h,details:q,event:o.name,event_time:o.date_time,place:o.address,total_cost:0,date_time:Date.now()}),G=Object(j.a)(R,2),J=G[0],K=G[1],Z=Object(n.useState)({cvc:"",expiry:"",focus:"",name:"",number:""}),U=Object(j.a)(Z,2),V=U[0],Q=U[1];if(Object(n.useEffect)((function(){K(Object(v.a)(Object(v.a)({},J),{},{total_cost:z}))}),[z]),Object(n.useEffect)((function(){K(Object(v.a)(Object(v.a)({},J),{},{details:q}))}),[q]),!1===e.show)return null;function W(e){Q(Object(v.a)(Object(v.a)({},V),{},{focus:e.target.name}))}function $(e){Q(Object(v.a)(Object(v.a)({},V),{},Object(m.a)({},e.target.name,e.target.value)))}function ee(){return(ee=Object(g.a)(p.a.mark((function e(){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("/api/event/".concat(t));case 3:c=e.sent,X(c.eventSeats),H([]),E(0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var te=V.number.length>=16&&3===V.cvc.length&&V.expiry.length>=4&&V.name.length>=2,ce=q.map((function(e,t){return Object(b.jsxs)("div",{className:"eventpage-modal-order-card",children:["Sector: ",e.sector,", Price: ",e.price," KZT;"]},t)})),ne=P.map((function(e){return Object(b.jsxs)("button",{"data-tip":"","data-for":e._id,className:"eventpage-modal-seat-button",disabled:q.length>=5||e.quantity<=0,onClick:function(){return function(e){e.quantity--,E(z+e.price),q.push({sector:e.sector,price:e.price})}(e)},children:[e.sector,", available tickets: ",e.quantity||"sold out",Object(b.jsx)(D.a,{className:"eventpage-modal-tooltip",type:"dark",place:"left",effect:"solid",id:e._id,getContent:function(){return"Price: ".concat(e.price," KZT")}})]},e._id)}));function se(){return(se=Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,s("/api/event/create","POST",{newOrder:J,seats:P});case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"eventpage-modal",children:Object(b.jsxs)("div",{className:"eventpage-modal-content",children:[Object(b.jsx)("button",{className:"eventpage-modal-close-button",onClick:e.onShow,children:"X"}),Object(b.jsx)("h2",{align:"center",children:o.name}),!y&&Object(b.jsxs)("div",{className:"eventpage-modal-body",children:[Object(b.jsxs)("div",{className:"eventpage-modal-left",children:[q.length>=5&&Object(b.jsx)("div",{style:{color:"darkred"},children:Object(b.jsx)("p",{children:"You can purchase only 5 ticket!"})}),Object(b.jsx)("div",{children:Object(b.jsx)("i",{children:"Choose type: "})}),Object(b.jsxs)("div",{className:"eventpage-modal-seats",children:[ne,0===P.length&&Object(b.jsx)("div",{style:{fontSize:"20px"},children:"No ticket available yet!"})]})]}),Object(b.jsxs)("div",{className:"eventpage-modal-right",children:[Object(b.jsx)("div",{children:Object(b.jsx)("i",{children:"Here you can see your selected tickets:"})}),Object(b.jsxs)("div",{align:"right",children:[a&&Object(b.jsx)("span",{children:Object(b.jsx)("i",{children:"Clearing . . . "})}),Object(b.jsx)("button",{className:"eventpage-modal-clear-button",onClick:function(){return ee.apply(this,arguments)},disabled:0===q.length||a,children:"Clear order"})]}),Object(b.jsxs)("p",{children:["Total cost: ",Object(b.jsx)("b",{children:z})," KZT"]}),Object(b.jsx)("div",{children:ce})]}),Object(b.jsx)("div",{}),Object(b.jsx)("button",{disabled:0===q.length||a,className:"eventpage-modal-buy-button",onClick:function(){return N(!y)},children:"Purchase"})]}),y&&!C&&Object(b.jsxs)("div",{className:"eventpage-card",children:[Object(b.jsx)("p",{children:"Please enter your card information below: "}),Object(b.jsxs)("p",{children:["Total: ",Object(b.jsx)("b",{children:J.total_cost})," KZT"]}),Object(b.jsx)(F.a,{cvc:V.cvc,expiry:V.expiry,focused:V.focus,name:V.name,number:V.number}),Object(b.jsx)("form",{className:"eventpage-card-form",children:Object(b.jsxs)("div",{className:"eventpage-card-body",children:[Object(b.jsx)(M.a,{displayType:"tel",placeholder:"Credit card number",onChange:$,onFocus:W,name:"number",format:"#### #### #### ####",mask:"_"}),Object(b.jsx)("input",{type:"text",name:"name",placeholder:"Card owner: e.g John Doe",onChange:$,onFocus:W}),Object(b.jsxs)("div",{className:"eventpage-card-input",children:[Object(b.jsx)(M.a,{displayType:"tel",name:"expiry",onChange:$,onFocus:W,format:"##/##",placeholder:"MM/YY",mask:["M","M","Y","Y"]}),Object(b.jsx)(M.a,{displayType:"tel",name:"cvc",onFocus:W,onChange:$,placeholder:"CVC/CVV",format:"###"})]})]})}),Object(b.jsxs)("div",{className:"eventpage-card-buttons",align:"center",children:[Object(b.jsx)("button",{className:"eventpage-card-button",onClick:function(){return N(!y)},children:"Back"}),Object(b.jsx)("button",{className:"eventpage-card-purchase",onClick:function(){return se.apply(this,arguments)},disabled:!te,children:"Confirm"})]})]}),C&&Object(b.jsxs)("div",{children:[a&&Object(b.jsxs)("div",{align:"center",children:[Object(b.jsx)(I,{}),Object(b.jsx)("p",{children:"Payment proceeding. . ."})]}),!a&&Object(b.jsxs)("div",{align:"center",style:{color:"darkgreen"},children:["Thank you for purchasing, follow the link to see the ordered ticket ",Object(b.jsx)(i.b,{to:"/info",children:"Link"})]})]})]})})})};var B=function(){var e=Object(l.h)().id,t=Object(n.useState)(),c=Object(j.a)(t,2),s=c[0],a=c[1],r=f(),o=r.loading,O=r.request,x=Object(n.useContext)(d).isAuth,m=Object(n.useState)(!1),v=Object(j.a)(m,2),y=v[0],N=v[1],w=Object(n.useCallback)(Object(g.a)(p.a.mark((function t(){var c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O("/api/event/".concat(e));case 3:c=t.sent,a(c),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])}))),[O]);return Object(n.useEffect)((function(){w()}),[w]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u,{}),Object(b.jsx)("div",{className:"eventpage-container",children:Object(b.jsxs)("div",{className:"eventpage-main",children:[void 0!==s&&Object(b.jsx)(h.a,{children:Object(b.jsx)("title",{children:s.event.name})}),Object(b.jsx)(i.b,{style:{textDecoration:"none",color:"#00838F"},to:"/",children:"\u25c0Back"}),(o||void 0===s)&&Object(b.jsx)("div",{align:"center",children:Object(b.jsx)(k,{})}),void 0!==s&&Object(b.jsx)(S,{event:s.event}),!x&&Object(b.jsx)("p",{align:"right",style:{color:"darkred"},children:"In order to purchase, you have to sign in"}),Object(b.jsx)("div",{className:"eventpage-mobile-buy",align:"right",children:Object(b.jsx)("button",{onClick:function(){return N(!0)},disabled:!x,className:"eventpage-purchase-button",children:"Buy tickets"})}),void 0!==s&&Object(b.jsx)(T,{event:s,show:y,onShow:function(){return N(!1)}})]})})]})};var z=function(){var e=Object(l.g)(),t=Object(n.useContext)(d),c=Object(n.useState)(!0),s=Object(j.a)(c,2),a=s[0],r=s[1],o=f(),u=o.loading,O=o.request,x=o.error,y=o.clearError,N=Object(n.useState)({email:"",password:""}),k=Object(j.a)(N,2),w=k[0],C=k[1];function S(){return(S=Object(g.a)(p.a.mark((function c(){var n;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,""!==w.password&&""!==w.email){c.next=3;break}return c.abrupt("return");case 3:return r(!0),c.next=6,O("/api/auth/login","POST",Object(v.a)({},w));case 6:n=c.sent,t.login(n.token,n.userID),e.push("/info"),c.next=13;break;case 11:c.prev=11,c.t0=c.catch(0);case 13:case"end":return c.stop()}}),c,null,[[0,11]])})))).apply(this,arguments)}function F(e){C(Object(v.a)(Object(v.a)({},w),{},Object(m.a)({},e.target.name,e.target.value.trim())))}return Object(n.useEffect)((function(){null!==x&&(r(!1),y())}),[x,y]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"loginpage-card",children:[Object(b.jsx)(h.a,{children:Object(b.jsx)("title",{children:"Log in"})}),Object(b.jsxs)("div",{className:"loginpage-main",children:[Object(b.jsx)(i.b,{to:"/",className:"loginpage-back",children:"\u25c1Back"}),Object(b.jsx)("div",{align:"center",className:"loginpage-header",children:"Log in"}),Object(b.jsxs)("div",{className:"loginpage-grid",children:[Object(b.jsx)("div",{align:"center",children:Object(b.jsx)("input",{className:"loginpage-input",placeholder:"Email",type:"text",name:"email",value:w.email,onChange:F})}),Object(b.jsxs)("div",{align:"center",children:[Object(b.jsx)("input",{className:"loginpage-input",placeholder:"Password",type:"password",name:"password",value:w.password,onChange:F}),!a&&Object(b.jsx)("div",{style:{color:"darkred",fontSize:"17px"},children:"Invalid email or password!"}),u&&Object(b.jsx)("div",{children:"Loading..."})]}),Object(b.jsxs)("div",{align:"center",style:{fontSize:"13px"},children:["Do not have account yet? ",Object(b.jsx)(i.b,{to:"/register",style:{color:"white"},children:"Sign up now"})]}),Object(b.jsx)("div",{align:"center",children:Object(b.jsx)("button",{onClick:function(){return S.apply(this,arguments)},className:"loginpage-button",disabled:u,children:"Login"})})]})]})]})})};var E=function(e){var t=Object(n.useState)(!1),c=Object(j.a)(t,2),s=c[0],a=c[1],r=Object(l.g)(),i=e.event;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"mainpage-event-card",onMouseLeave:function(){return a(!1)},onMouseEnter:function(){return a(!0)},children:[Object(b.jsx)("img",{src:i.image,height:"200",alt:"no-image.jpg",width:"220"}),Object(b.jsx)("b",{style:{fontSize:"18px"},children:i.name}),Object(b.jsx)("br",{}),Object(b.jsx)("b",{style:{fontSize:"14px"},children:Object(b.jsx)(C.a,{format:"MMMM D, HH:mm",children:i.date_time})}),s&&Object(b.jsxs)("div",{className:"mainpage-event-hover",children:[Object(b.jsx)("div",{style:{color:"white",fontSize:"20px",backgroundColor:"#00838F"},children:i.artist}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:function(){r.push("/event/".concat(i._id))},className:"mainpage-event-button",children:"More"})]})]})})};var _=function(e){var t=e.events;if(e.order){var c=t.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(E,{event:e})},e._id)}));return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"mainpage-main-card",children:c})})}var n=t.slice(0).reverse().map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(E,{event:e})},e._id)}));return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"mainpage-main-card",children:n})})};var A=function(){var e=f(),t=e.loading,c=e.request,s=Object(n.useState)(),a=Object(j.a)(s,2),r=a[0],i=a[1],l=Object(n.useState)(!0),o=Object(j.a)(l,2),d=o[0],O=o[1],x=Object(n.useState)({search:""}),y=Object(j.a)(x,2),N=y[0],k=y[1],w=Object(n.useCallback)(Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/event");case 3:t=e.sent,i(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[c]);Object(n.useEffect)((function(){C()}),[N]);var C=function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/event/search","POST",N,{});case 3:t=e.sent,i(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){w()}),[w]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u,{}),Object(b.jsx)(h.a,{children:Object(b.jsx)("title",{children:"Get Tickets \u2122"})}),Object(b.jsxs)("div",{className:"mainpage-container",children:[Object(b.jsxs)("div",{className:"four",style:{marginTop:"20px",marginBottom:"20px"},children:[Object(b.jsx)("div",{className:"div1"}),Object(b.jsx)("div",{className:"div2"}),Object(b.jsx)("div",{className:"div3"}),Object(b.jsx)("div",{className:"div4"})]}),Object(b.jsxs)("main",{className:"mainpage-main",children:[Object(b.jsx)("input",{placeholder:"Search by artist:",className:"mainpage-search-bar",type:"text",name:"search",value:N.search,onChange:function(e){k(Object(v.a)(Object(v.a)({},N),{},Object(m.a)({},e.target.name,e.target.value)))}}),Object(b.jsx)("h1",{align:"center",style:{color:"#707070"},children:"Available events:"}),Object(b.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%"},children:void 0!==r&&0!==r.length&&Object(b.jsxs)("div",{style:{color:"#707070"},children:["sort: ",Object(b.jsxs)("button",{className:"mainpage-sort-button",onClick:function(){return O(!d)},children:[d&&"Earliest"," ",!d&&"Latest"," first"]})]})}),Object(b.jsx)("br",{}),(t||void 0===r)&&Object(b.jsx)("div",{align:"center",children:Object(b.jsx)(I,{})}),void 0!==r&&!t&&Object(b.jsx)(_,{order:d,events:r}),void 0!==r&&0===r.length&&!t&&Object(b.jsx)("div",{style:{fontSize:"20px"},children:"Sorry, we couldn't find anything . . ."})]})]})]})},P=c(22),X=c(33),Y=c.n(X);c(53);var L=function(){var e=f(),t=e.loading,c=e.request,s=e.error,a=e.clearError,r=Object(n.useState)(!1),l=Object(j.a)(r,2),o=l[0],d=l[1],u=Object(n.useState)(!1),O=Object(j.a)(u,2),x=O[0],y=O[1],N=Object(n.useState)(!1),k=Object(j.a)(N,2),w=k[0],C=k[1],S=Object(n.useState)(!1),F=Object(j.a)(S,2),I=F[0],M=F[1],D=Object(n.useState)(!1),T=Object(j.a)(D,2),B=T[0],z=T[1],E=Object(n.useState)(""),_=Object(j.a)(E,2),A=_[0],X=_[1],L=Object(n.useState)(""),q=Object(j.a)(L,2),H=q[0],R=q[1],G=Object(n.useState)(""),J=Object(j.a)(G,2),K=J[0],Z=J[1],U=Object(n.useState)({email:"",password:"",name:"",phone:""}),V=Object(j.a)(U,2),Q=V[0],W=V[1];Object(n.useEffect)((function(){R("")}),[Q.email]),Object(n.useEffect)((function(){null!==s&&(R(s),a())}),[s,a]);var $={backgroundColor:"rgba(45, 193, 90, 0.2)"},ee=function(){return d(!o)},te=function(){return y(!x)},ce=function(){return C(!w)},ne=function(){return M(!I)};function se(){return(se=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(""),e.next=4,c("/api/auth/register","POST",Object(v.a)({},Q));case 4:t=e.sent,Z(t.message),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ae(e){W(Object(v.a)(Object(v.a)({},Q),{},Object(m.a)({},e.target.name,e.target.value.trim())))}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h.a,{children:Object(b.jsx)("title",{children:"Sign Up"})}),Object(b.jsxs)("div",{className:"loginpage-card",children:[!K&&Object(b.jsxs)("div",{className:"loginpage-main",children:[Object(b.jsx)(i.b,{to:"/",className:"loginpage-back",children:"\u25c1Back"}),Object(b.jsx)("div",{align:"center",className:"loginpage-header",children:"Sign Up"}),Object(b.jsxs)("div",{className:"signuppage-grid",children:[Object(b.jsx)("div",{style:{display:"flex",alignItems:"center"},children:"Email: "}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(b.jsx)("input",{style:Object(P.a)(Q.email)?$:null,className:"signuppage-input",onFocus:ee,onBlur:ee,placeholder:"example@email.com",type:"email",name:"email",value:Q.email,onChange:ae})}),o&&!Object(P.a)(Q.email)&&Object(b.jsx)("div",{style:{color:"darkred",fontSize:"15px"},children:'Email should be in the form "example@email.com"'}),H&&Object(b.jsx)("div",{style:{color:"darkred",fontSize:"15px"},children:H})]}),Object(b.jsx)("div",{style:{display:"flex",alignItems:"center"},children:"Name: "}),Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{style:Q.name.length>=1?$:null,className:"signuppage-input",onFocus:ce,onBlur:ce,placeholder:"e.g. Alua",type:"text",name:"name",value:Q.name,onChange:ae}),w&&Q.name.length<1&&Object(b.jsx)("div",{style:{color:"darkred",fontSize:"15px"},children:"Name field must not be empty"})]}),Object(b.jsx)("div",{style:{display:"flex",alignItems:"center"},children:"Password: "}),Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{style:Q.password.length>=6?$:null,className:"signuppage-input",onFocus:te,onBlur:te,placeholder:"******",type:"password",name:"password",value:Q.password,onChange:ae}),x&&Q.password.length<6&&Object(b.jsx)("div",{style:{color:"darkred",fontSize:"15px"},children:"Password should contain at least 6 characters"})]}),Object(b.jsx)("div",{style:{display:"flex",alignItems:"center",whiteSpace:"nowrap"},children:"Confirm password: "}),Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{style:Q.password.length>=6&&Q.password===A?$:null,className:"signuppage-input",onClick:function(){return z(!0)},placeholder:"******",type:"password",name:"confirmpassword",value:A,onChange:function(e){return X(e.target.value.trim())}}),B&&Q.password!==A&&Object(b.jsx)("div",{style:{color:"darkred",fontSize:"15px"},children:"Passwords are not the same"})]}),Object(b.jsx)("div",{style:{display:"flex",alignItems:"center"},children:"Phone number: "}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(b.jsx)(Y.a,{containerStyle:{borderRadius:"20px"},buttonStyle:{borderRadius:"20px"},dropdownStyle:{borderRadius:"20px"},inputStyle:{backgroundColor:Q.phone.length>=11?"rgba(45, 193, 90, 0.2)":null,borderRadius:"20px",width:"296px"},inputClass:"signuppage-input",onFocus:ne,onBlur:ne,onlyCountries:["kz"],country:"kz",value:Q.phone,placeholder:"+7 XXX XXX-XX-XX",onChange:function(e){W(Object(v.a)(Object(v.a)({},Q),{},{phone:e}))}})}),I&&Q.phone.length<11&&Object(b.jsx)("div",{style:{color:"darkred",fontSize:"15px"},children:"Phone number should be in the format +7 XXX XXX-XX-XX"})]})]}),Object(b.jsxs)("div",{align:"center",style:{padding:"10px"},children:[Object(b.jsx)("br",{}),t&&Object(b.jsx)("div",{children:"Loading..."}),Object(b.jsx)("button",{className:"signuppage-button",onClick:function(){return se.apply(this,arguments)},disabled:!Object(P.a)(Q.email)||Q.password.length<6||Q.name.length<1||Q.phone.length<11||A!==Q.password||t,children:"Register"})]})]}),K&&Object(b.jsxs)("div",{className:"signuppage-success",children:[Object(b.jsx)("div",{children:Object(b.jsx)("b",{children:"You have been successfully signed up to our web-service! Follow the link in order to login!"})})," ",Object(b.jsx)("br",{})," ",Object(b.jsx)("div",{align:"center",children:Object(b.jsx)(i.b,{to:"/login",style:{color:"white"},children:"Login"})})]})]})]})};var q=function(e){var t=e.userInfo.phone,c=e.userInfo.email;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Customer's personal information:"}),Object(b.jsxs)("div",{className:"userinfopage-usercard",children:[Object(b.jsx)("div",{style:{whiteSpace:"nowrap"},children:"Phone number:"}),Object(b.jsxs)("div",{style:{fontFamily:"Montserrat, sans-serif"},children:["+",t]}),Object(b.jsx)("div",{children:"Email:"}),Object(b.jsx)("div",{style:{fontFamily:"Montserrat, sans-serif"},children:c})]})]})};var H=function(e){var t=Object(n.useState)(!1),c=Object(j.a)(t,2),s=c[0],a=c[1],r=e.details.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("b",{style:{fontFamily:"Montserrat, sans-serif"},children:e.sector})}),Object(b.jsxs)("td",{children:[Object(b.jsx)("b",{style:{fontFamily:"Montserrat, sans-serif"},children:e.price})," KZT"]})]},e._id)}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("button",{className:"userinfopage-detail-button",onClick:function(){return a(!s)},children:[!s&&Object(b.jsx)("b",{children:"\u25b8"})," ",s&&Object(b.jsx)("b",{children:"\u25be"})]}),s&&Object(b.jsxs)("table",{style:{paddingLeft:"20px"},children:[Object(b.jsx)("th",{style:{borderBottom:"1px solid black"},children:"Sector name"}),Object(b.jsx)("th",{style:{borderBottom:"1px solid black"},children:"Price for sector"}),r]})]})};var R=function(e){var t=Object(n.useState)(!1),c=Object(j.a)(t,2),s=c[0],a=c[1],r=e.orderInfo,i=r.map((function(e){return Object(b.jsxs)("div",{className:"userinfopage-ticketcard",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{color:"#707070"},children:"Concert information:"}),Object(b.jsxs)("div",{children:["Name of concert: ",Object(b.jsx)("b",{style:{color:"#00838F",fontFamily:"Montserrat, sans-serif"},children:e.event})]}),Object(b.jsxs)("div",{children:["Place: ",Object(b.jsx)("b",{style:{color:"#00838F",fontFamily:"Montserrat, sans-serif"},children:e.place})]}),Object(b.jsxs)("div",{children:["Date of concert: ",Object(b.jsx)("b",{style:{color:"#00838F",fontFamily:"Montserrat, sans-serif"},children:Object(b.jsx)(C.a,{format:"D MMM HH:mm",children:e.event_time})})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{style:{fontSize:"12px"},children:"Details: "}),Object(b.jsx)(H,{details:e.details})]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{color:"#707070"},children:"Order information:"}),Object(b.jsxs)("div",{className:"userinfopage-order-detail",children:["Receipt ID: ",e._id]}),Object(b.jsxs)("div",{className:"userinfopage-order-detail",children:["Date of order: ",Object(b.jsx)(C.a,{format:"HH:mm:ss DD/MM/YYYY",children:e.date_time})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{children:["Total price: ",e.total_cost," KZT"]})]})]},e._id)}));return Object(n.useEffect)((function(){0===r.length?a(!0):a(!1)}),[r]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Orders:"}),Object(b.jsxs)("div",{className:"userinfopage-ordercard",children:[s&&Object(b.jsx)("p",{style:{height:"200px"},children:"Sorry, you have no orders yet . . ."}),i]})]})};var G=function(){var e=f(),t=e.loading,c=e.request,s=Object(n.useContext)(d),a=s.token,r=s.isAuth,i=Object(n.useState)(null),l=Object(j.a)(i,2),o=l[0],O=l[1],x=Object(n.useCallback)(Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/userdata","GET",null,{"Content-Type":"application/json",Authorization:"Basic ".concat(a)});case 3:t=e.sent,O(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a,c]);return Object(n.useEffect)((function(){x()}),[x]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u,{}),Object(b.jsx)(h.a,{children:Object(b.jsx)("title",{children:"My account"})}),Object(b.jsx)("div",{className:"userinfopage-container",children:Object(b.jsxs)("div",{className:"userinfopage-body",children:[(t||null===o)&&r&&Object(b.jsx)("div",{align:"center",style:{height:"500px"},children:Object(b.jsx)(k,{})}),!r&&Object(b.jsx)("div",{style:{fontSize:"40px",color:"darkred",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:"Error 401 (No authorization)"}),r&&null!==o&&Object(b.jsxs)("h1",{align:"center",style:{color:"#707070"},children:["Hello, ",o.userInfo.name,"!"]}),Object(b.jsxs)("div",{className:"userinfopage-main",children:[null!==o&&Object(b.jsx)(q,{userInfo:o.userInfo}),null!==o&&Object(b.jsx)(R,{orderInfo:o.orderInfo})]})]})})]})};var J=function(){var e=Object(l.g)();return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("footer",{children:[Object(b.jsxs)("div",{className:"footer-container",children:[Object(b.jsx)("div",{children:Object(b.jsx)("a",{className:"footer-link",href:"/about",onClick:function(t){t.preventDefault(),e.push("/about")},children:"About"})}),Object(b.jsx)("div",{children:Object(b.jsx)("a",{className:"footer-link",href:"/contacts",onClick:function(t){t.preventDefault(),e.push("/contacts")},children:"Contacts"})})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{align:"center",children:"\xa9 Get Tickets\u2122 All rights reserved"}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{align:"center",style:{fontSize:"12px"},children:[Object(b.jsx)("b",{children:"Web-service for coding lab 2021 AITU"}),Object(b.jsx)("br",{}),Object(b.jsx)("b",{children:"Developed in Nur-Sultan, Almaty Qazaqstan"})]})]})]})})},K="userData";var Z=function(){var e=function(){var e=Object(n.useState)(null),t=Object(j.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),r=Object(j.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)(null),d=Object(j.a)(o,2),b=d[0],u=d[1],h=Object(n.useCallback)((function(e,t){s(e),u(t),localStorage.setItem(K,JSON.stringify({userID:t,token:e}))}),[]),O=Object(n.useCallback)((function(){u(null),s(null),localStorage.removeItem(K)}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem(K));e&&e.token&&h(e.token,e.userID),l(!0)}),[h]),{login:h,logout:O,token:c,userID:b,ready:i}}(),t=e.token,c=e.login,s=e.logout,a=e.userID,r=!!t;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(d.Provider,{value:{token:t,login:c,logout:s,userID:a,isAuth:r},children:Object(b.jsxs)(i.a,{children:[Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{path:"/",exact:!0,children:Object(b.jsx)(A,{})}),Object(b.jsx)(l.b,{path:"/about",exact:!0,children:Object(b.jsx)(O,{})}),Object(b.jsx)(l.b,{path:"/contacts",exact:!0,children:Object(b.jsx)(N,{})}),Object(b.jsx)(l.b,{path:"/info",exact:!0,children:Object(b.jsx)(G,{})}),Object(b.jsx)(l.b,{path:"/login",exact:!0,children:Object(b.jsx)(z,{})}),Object(b.jsx)(l.b,{path:"/register",exact:!0,children:Object(b.jsx)(L,{})}),Object(b.jsx)(l.b,{path:"/event/:id",children:Object(b.jsx)(B,{})}),Object(b.jsx)(l.a,{to:"/"})]}),Object(b.jsx)(J,{})]})})})};r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(Z,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.29157478.chunk.js.map